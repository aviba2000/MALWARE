#!/bin/bash
if [[ $# -ne 1 ]]
then
	echo "Please introduce file with the ips to scan separated with break lines"
fi
lines=$( cat $1 | wc -l )
while IFS= read -r line; 
do
	ip=$( echo $line | cut -d' ' -f1 )
	port=$( echo $line | cut -d' ' -f2 )
	TARGET_IP=$( echo $line | cut -d ' ' -f3 )
	TARGET_LOGIN=$( echo $line | cut -d ' ' -f4 )
	nc -v $ip $port </dev/null>/var/tmp/telnet.output.txt                   # Try once.
    	sleep 2
	echo -e ^C
	rc=$?
	if [[ $rc -eq 0 ]] ; 
	then                # Make final determination.
  	  echo -e $ip $port $TARGET_IP $TARGET_LOGIN  >> /var/tmp/uphosts.txt 
	else
    	echo -e $ip $port $TARGET_IP $TARGET_LOGIN >> /var/tmp/downhosts.txt
	fi
done < $1
