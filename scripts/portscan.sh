if [[ $# -ne 1 ]]
then
	echo "Please introduce file with the ips to scan separated with break lines"
fi
lines=$( cat $1 | wc -l )
while IFS= read -r line; 
do
        ip=$line 
        ((count = 5))                           # Maximum number to try.
	while [[ $count -ne 0 ]] ; 
	do
    	ping -c 1 $ip                   # Try once.
    	rc=$?
    	if [[ $rc -eq 0 ]] ; 
	then
        	((count = 1))                    # If okay, flag loop exit.
    	else
        sleep 1                          # Minimise network storm.
    	fi
    	((count = count - 1))                # So we don't go forever.
	done
	if [[ $rc -eq 0 ]] ; 
	then                # Make final determination.
  	  echo -n "$ip" >> uphosts.txt 
	else
    	echo -n "$ip" >> downhosts.txt
	fi
done < $1

