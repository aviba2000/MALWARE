#!/bin/bash

# This script takes as input a script and outputs the same script as a bash string
# removing its comments and empty lines.
# Write the output variable as a new script: echo -e $str > script.sh && chmod +x script.sh

if [ $# -ne 1 ]
then
	echo "Usage: ./Script_to_String.sh SCRIPT_NAME"
	exit -1
fi

input=$1

#echo -n "str=\""
echo -n "str='"

while IFS= read -r line
do
	if [ "$line" != "" ] && ( [ "${line:0:1}" != "#" ] || [ "${line:0:2}" == "#!" ] ); then
		new_line=`echo $line | awk -F " # " ' {print $1}'`
		echo -n "$new_line \n"
	fi
done < "$input"

#echo " \""
echo "'"
