#!/bin/bash

# generate a random string of length 32 with openssl and save to KEY variable
KEY=$(openssl rand -hex 32)

# generate IV of 16 bytes from computer id and save to IV variable
IV=$(cat /etc/machine-id | md5sum | cut -d ' ' -f 1 | head -c 16)

# encrypt the payload with openssl and save to PAYLOAD variable
PAYLOAD=$(echo -n "script" | openssl enc -aes-256-cbc -K $KEY -iv $IV -e -base64)
