FROM tomcat:8.5.78-jre8

RUN sed -i 's/port="8080"/port="8081"/' ${CATALINA_HOME}/conf/server.xml && sed -i 's/port="8009"/port="8109"/' ${CATALINA_HOME}/conf/server.xml && sed -i 's/port="8005"/port="8105"/' ${CATALINA_HOME}/conf/server.xml && rm -rf /usr/local/tomcat/webapps/* && apt update && apt install -y ncat cron vim default-jdk procps python3 telnet
ADD target/log4shell-1.0-SNAPSHOT.war /usr/local/tomcat/webapps/ROOT.war
EXPOSE 8081
CMD ["catalina.sh", "run"]
